<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Background Remover API</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
			/* Demo Section Styles */
			.demo-container {
				max-width: 800px;
				margin: 0 auto;
			}
			
			.demo-section {
				background: rgba(255, 255, 255, 0.1);
				padding: 30px;
				border-radius: 12px;
				margin-bottom: 30px;
				backdrop-filter: blur(10px);
				border: 1px solid rgba(255, 255, 255, 0.2);
			}
			
			.demo-section h3 {
				color: #ffffff;
				margin-bottom: 20px;
				font-size: 1.5rem;
			}
			
			.form-group {
				margin-bottom: 20px;
			}
			
			.form-group label {
				display: block;
				margin-bottom: 8px;
				font-weight: 600;
				color: #ffffff;
			}
			
			.form-group input[type="text"], 
			.form-group input[type="file"] {
				width: 100%;
				padding: 12px;
				border: 2px solid rgba(255, 255, 255, 0.3);
				border-radius: 8px;
				font-size: 1rem;
				background: rgba(255, 255, 255, 0.9);
				color: #333;
				transition: border-color 0.3s;
			}
			
			.form-group input[type="text"]:focus, 
			.form-group input[type="file"]:focus {
				outline: none;
				border-color: #9bf1ff;
			}
			
			.demo-result {
				padding: 20px;
				border-radius: 8px;
				margin-top: 20px;
			}
			
			.demo-result.success {
				background: rgba(76, 175, 80, 0.1);
				color: #4CAF50;
				border: 1px solid rgba(76, 175, 80, 0.3);
			}
			
			.demo-result.error {
				background: rgba(244, 67, 54, 0.1);
				color: #f44336;
				border: 1px solid rgba(244, 67, 54, 0.3);
			}
			
			.image-preview {
				max-width: 100%;
				margin-top: 20px;
				border-radius: 8px;
				box-shadow: 0 4px 8px rgba(0,0,0,0.1);
			}
			
			.loading {
				text-align: center;
				padding: 20px;
			}
			
			.spinner {
				width: 40px;
				height: 40px;
				border: 4px solid rgba(255, 255, 255, 0.3);
				border-top: 4px solid #9bf1ff;
				border-radius: 50%;
				animation: spin 1s linear infinite;
				margin: 0 auto 20px;
			}
			
			@keyframes spin {
				0% { transform: rotate(0deg); }
				100% { transform: rotate(360deg); }
			}
			
			.api-key-display {
				background: rgba(255, 255, 255, 0.1);
				padding: 15px;
				border-radius: 8px;
				border-left: 4px solid #9bf1ff;
				font-family: monospace;
				word-break: break-all;
				margin-top: 10px;
				color: #ffffff;
			}
			
			.two-column {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 20px;
				margin-top: 20px;
			}
			
			@media (max-width: 768px) {
				.two-column {
					grid-template-columns: 1fr;
				}
			}
		</style>
	</head>
	<body class="is-preload">

		<!-- Sidebar -->
			<section id="sidebar">
				<div class="inner">
					<nav>
						<ul>
							<li><a href="#intro">Welcome</a></li>
							<li><a href="#one">API Demo</a></li>
							<li><a href="#two">API Documentation</a></li>
							<li><a href="#three">Get in touch</a></li>
						</ul>
					</nav>
				</div>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Intro -->
					<section id="intro" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Background Remover API</h1>
							<p>Remove backgrounds from images with AI-powered precision and lightning-fast processing.</p>
							<ul class="actions">
								<li><a href="#one" class="button scrolly">Learn more</a></li>
							</ul>
						</div>
					</section>

				<!-- One -->
					<section id="one" class="wrapper style2 spotlights">
						<div class="inner">
							<div class="demo-container">
								<div class="demo-section">
									<h3>1. Generate API Key</h3>
									<div class="form-group">
										<label for="keyName">API Key Name:</label>
										<input type="text" id="keyName" placeholder="Enter a name for your API key" />
									</div>
									<button onclick="generateApiKey()" class="button primary">Generate API Key</button>
									<div id="apiKeyResult"></div>
								</div>
								
								<div class="demo-section">
									<h3>2. Remove Background</h3>
									<div class="form-group">
										<label for="apiKeyInput">Your API Key:</label>
										<input type="text" id="apiKeyInput" placeholder="Enter your API key" />
									</div>
									<div class="form-group">
										<label for="imageFile">Select Image:</label>
										<input type="file" id="imageFile" accept="image/*" />
									</div>
									<button onclick="removeBackground()" class="button primary">Remove Background</button>
									<div id="imageResult"></div>
								</div>
							</div>
						</div>
					</section>

				<!-- Two -->
					<section id="two" class="wrapper style3 fade-up">
						<div class="inner">
							<h2>API Documentation</h2>

							<!-- Overview -->
								<section>
									<h3>Overview</h3>
									<p>The Background Remover API provides AI-powered background removal capabilities for images. This RESTful API allows you to remove backgrounds from images with high precision and speed.</p>
									<p><strong>Base URL:</strong> <code>https://web-production-faaf.up.railway.app</code></p>
									<p><strong>Authentication:</strong> API Key required for image processing endpoints</p>
									<p><strong>Supported Formats:</strong> JPEG, PNG, WebP, BMP, TIFF</p>
									<p><strong>Max File Size:</strong> 5MB</p>
								</section>

							<!-- Authentication -->
								<section>
									<h3>Authentication</h3>
									<p>Most endpoints require an API key for authentication. Include your API key in the request headers:</p>
									<pre><code>Authorization: Bearer YOUR_API_KEY</code></pre>
									<blockquote>
										<strong>Note:</strong> API keys are generated using the <code>/api-keys</code> endpoint and start with the prefix <code>bgr_</code>
									</blockquote>
								</section>

							<!-- Quick Start -->
								<section>
									<h3>Quick Start</h3>
									<div class="features">
										<section>
											<span class="icon solid major fa-key"></span>
											<h4>1. Generate API Key</h4>
											<p>Create a new API key using the <code>/api-keys</code> endpoint with your application name.</p>
										</section>
										<section>
											<span class="icon solid major fa-upload"></span>
											<h4>2. Upload Image</h4>
											<p>Send your image file to the <code>/remove-background</code> endpoint with your API key.</p>
										</section>
										<section>
											<span class="icon solid major fa-download"></span>
											<h4>3. Get Result</h4>
											<p>Receive the processed image with transparent background in PNG format.</p>
										</section>
									</div>
								</section>

							<!-- Code Example -->
								<section>
									<h3>Code Example</h3>
									<pre><code>// Generate API Key
const response = await fetch('https://web-production-faaf.up.railway.app/api-keys', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: 'My App' })
});
const apiKey = await response.json();

// Remove Background
const formData = new FormData();
formData.append('file', imageFile);

const result = await fetch('https://web-production-faaf.up.railway.app/remove-background?return_json=true', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${apiKey.key}` },
  body: formData
});

const processedImage = await result.json();</code></pre>
								</section>

							<!-- Key Features -->
								<section>
									<h3>Key Features</h3>
									<div class="features">
										<section>
											<span class="icon solid major fa-brain"></span>
											<h4>AI-Powered</h4>
											<p>Advanced machine learning models for precise background detection and removal.</p>
										</section>
										<section>
											<span class="icon solid major fa-bolt"></span>
											<h4>Fast Processing</h4>
											<p>Typically 1-5 seconds processing time depending on image size and complexity.</p>
										</section>
										<section>
											<span class="icon solid major fa-shield-alt"></span>
											<h4>Secure</h4>
											<p>API key authentication ensures secure access to your image processing capabilities.</p>
										</section>
										<section>
											<span class="icon solid major fa-globe"></span>
											<h4>RESTful API</h4>
											<p>Standard HTTP methods and JSON responses for easy integration with any platform.</p>
										</section>
										<section>
											<span class="icon solid major fa-images"></span>
											<h4>Multiple Formats</h4>
											<p>Support for JPEG, PNG, WebP, BMP, and TIFF image formats.</p>
										</section>
										<section>
											<span class="icon solid major fa-check"></span>
											<h4>High Quality</h4>
											<p>Preserves fine details like hair and edges for professional results.</p>
										</section>
									</div>
								</section>

							<ul class="actions">
								<li><a href="elements.html" class="button">View Full Documentation</a></li>
							</ul>
						</div>
					</section>

				<!-- Three -->
					<section id="three" class="wrapper style1 fade-up">
						<div class="inner">
							<h2>Get in touch</h2>
							<p>Have questions about the Background Remover API or need support? We'd love to hear from you. Send us a message and we'll get back to you as soon as possible.</p>
							<div class="split style1">
								<section>
									<form method="post" action="mailto:support@hjbcodeforge.com">
										<div class="fields">
											<div class="field half">
												<label for="name">Name</label>
												<input type="text" name="name" id="name" />
											</div>
											<div class="field half">
												<label for="email">Email</label>
												<input type="text" name="email" id="email" />
											</div>
											<div class="field">
												<label for="message">Message</label>
												<textarea name="message" id="message" rows="5"></textarea>
											</div>
										</div>
										<ul class="actions">
											<li><a href="" class="button submit">Send Message</a></li>
										</ul>
									</form>
								</section>
								<section>
									<ul class="contact">
										<li>
											<h3>Address</h3>
											<span>Ottawa, Ontario<br />
											Canada</span>
										</li>
										<li>
											<h3>Email</h3>
											<a href="mailto:support@hjbcodeforge.com">support@hjbcodeforge.com</a>
										</li>
										<li>
											<h3>Social</h3>
											<ul class="icons">
												<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
												<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
												<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
												<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
												<li><a href="#" class="icon brands fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
											</ul>
										</li>
									</ul>
								</section>
							</div>
						</div>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			
			<script>
				// Configuration
				const API_BASE_URL = 'https://web-production-faaf.up.railway.app';
				
				// Check if API is properly configured
				function checkApiConfiguration() {
					if (API_BASE_URL.includes('your-api-name') || API_BASE_URL.includes('localhost')) {
						const warningDiv = document.createElement('div');
						warningDiv.className = 'demo-result error';
						warningDiv.style.margin = '20px 0';
						warningDiv.innerHTML = `
							<strong>⚠️ API Configuration Required</strong><br>
							The API URL needs to be configured. Please:<br>
							1. Deploy the API to Railway (see DEPLOYMENT_GUIDE.md)<br>
							2. Update the API_BASE_URL in this file<br>
							3. Or run locally with: <code>python3 main.py</code>
						`;
						document.querySelector('.demo-container').insertBefore(warningDiv, document.querySelector('.demo-section'));
						
						// Disable buttons
						document.querySelectorAll('.button').forEach(btn => {
							btn.disabled = true;
							btn.style.opacity = '0.5';
						});
					}
				}
				
				// Check configuration on page load
				document.addEventListener('DOMContentLoaded', checkApiConfiguration);
				
				async function generateApiKey() {
					const keyName = document.getElementById('keyName').value;
					const resultDiv = document.getElementById('apiKeyResult');
					
					if (!keyName.trim()) {
						resultDiv.innerHTML = '<div class="demo-result error">Please enter a name for your API key</div>';
						return;
					}
					
					// Check if API is configured
					if (API_BASE_URL.includes('your-api-name')) {
						resultDiv.innerHTML = `
							<div class="demo-result error">
								<strong>⚠️ API Not Configured</strong><br>
								Please deploy the API first or run it locally.<br>
								See <strong>DEPLOYMENT_GUIDE.md</strong> for instructions.
							</div>
						`;
						return;
					}
					
					try {
						const response = await fetch(`${API_BASE_URL}/api-keys`, {
							method: 'POST',
							headers: {
								'Content-Type': 'application/json',
							},
							body: JSON.stringify({ name: keyName })
						});
						
						if (!response.ok) {
							throw new Error(`HTTP error! status: ${response.status}`);
						}
						
						const data = await response.json();
						
						// Auto-fill the API key input
						document.getElementById('apiKeyInput').value = data.key;
						
						resultDiv.innerHTML = `
							<div class="demo-result success">
								<strong>✅ API Key Generated Successfully!</strong>
								<div class="api-key-display">
									<strong>Key:</strong> ${data.key}<br>
									<strong>Name:</strong> ${data.name}<br>
									<strong>ID:</strong> ${data.id}
								</div>
								<p><small>💡 Your API key has been automatically filled in the form below</small></p>
							</div>
						`;
						
					} catch (error) {
						let errorMessage = error.message;
						
						// Provide more specific error messages
						if (error.message.includes('Failed to fetch') || error.name === 'TypeError') {
							errorMessage = `
								<strong>Connection Failed</strong><br>
								Cannot connect to the API server at:<br>
								<code>${API_BASE_URL}</code><br><br>
								<strong>Possible solutions:</strong><br>
								• Make sure the API is running locally: <code>python3 main.py</code><br>
								• Deploy the API to Railway (see DEPLOYMENT_GUIDE.md)<br>
								• Check if the API URL is correct
							`;
						}
						
						resultDiv.innerHTML = `<div class="demo-result error">❌ ${errorMessage}</div>`;
					}
				}
				
				async function removeBackground() {
					const apiKey = document.getElementById('apiKeyInput').value;
					const fileInput = document.getElementById('imageFile');
					const resultDiv = document.getElementById('imageResult');
					
					if (!apiKey.trim()) {
						resultDiv.innerHTML = '<div class="demo-result error">Please enter your API key</div>';
						return;
					}
					
					if (!fileInput.files || fileInput.files.length === 0) {
						resultDiv.innerHTML = '<div class="demo-result error">Please select an image file</div>';
						return;
					}
					
					const file = fileInput.files[0];
					
					// Validate file type
					const supportedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/bmp', 'image/tiff'];
					const supportedExtensions = ['.jpg', '.jpeg', '.png', '.webp', '.bmp', '.tiff', '.tif'];
					const fileName = file.name.toLowerCase();
					const isValidType = supportedTypes.includes(file.type) || 
									   supportedExtensions.some(ext => fileName.endsWith(ext));
					
					if (!isValidType) {
						resultDiv.innerHTML = '<div class="demo-result error">❌ Unsupported file format. Please upload a JPEG, PNG, WebP, BMP, or TIFF image.</div>';
						return;
					}
					
					// Check file size (limit to 5MB for free tier)
					if (file.size > 5 * 1024 * 1024) {
						resultDiv.innerHTML = '<div class="demo-result error">❌ File too large. Please upload an image smaller than 5MB.</div>';
						return;
					}
					
					// Show loading state
					resultDiv.innerHTML = `
						<div class="loading">
							<div class="spinner"></div>
							<p>Processing your image... This may take a few seconds</p>
							<p style="font-size: 0.9em; color: #aaa;">First request may take longer as the API starts up</p>
						</div>
					`;
					
					try {
						const formData = new FormData();
						formData.append('file', file);
						
						// Add return_json as a query parameter
						const url = `${API_BASE_URL}/remove-background?return_json=true`;
						
						// Create AbortController for timeout
						const controller = new AbortController();
						const timeoutId = setTimeout(() => controller.abort(), 120000); // 2 minutes timeout
						
						const response = await fetch(url, {
							method: 'POST',
							headers: {
								'Authorization': `Bearer ${apiKey}`
							},
							body: formData,
							signal: controller.signal
						});
						
						clearTimeout(timeoutId);
						
						if (!response.ok) {
							let errorMessage = `HTTP error! status: ${response.status}`;
							try {
								const errorData = await response.json();
								errorMessage = errorData.error || errorMessage;
							} catch (e) {
								errorMessage = response.statusText || errorMessage;
							}
							throw new Error(errorMessage);
						}
						
						// Check if response is JSON
						const contentType = response.headers.get('content-type');
						if (!contentType || !contentType.includes('application/json')) {
							throw new Error('Server returned non-JSON response. Please check API configuration.');
						}
						
						const data = await response.json();
						
						if (data.success) {
							resultDiv.innerHTML = `
								<div class="demo-result success">
									<strong>✅ Background Removed Successfully!</strong>
									<p><strong>Processing Time:</strong> ${data.processing_time.toFixed(2)} seconds</p>
									<div class="two-column">
										<div>
											<h3>Original Image</h3>
											<img src="${URL.createObjectURL(file)}" alt="Original" class="image-preview">
										</div>
										<div>
											<h3>Processed Image</h3>
											<img src="${data.processed_image_url}" alt="Processed" class="image-preview">
											<br><br>
											<a href="${data.processed_image_url}" download="processed_image.png" class="button">Download PNG</a>
										</div>
									</div>
								</div>
							`;
						} else {
							resultDiv.innerHTML = `<div class="demo-result error">❌ Error: ${data.error}</div>`;
						}
						
					} catch (error) {
						let errorMessage = error.message;
						
						// Handle specific error types
						if (error.name === 'AbortError') {
							errorMessage = 'Request timed out. The API may be starting up or experiencing issues. Please try again in a few minutes.';
						} else if (error.message.includes('NetworkError') || error.message.includes('Failed to fetch')) {
							errorMessage = 'Network error: Unable to connect to the API. Please check your internet connection and try again.';
						} else if (error.message.includes('CORS')) {
							errorMessage = 'CORS error: Please make sure the API is properly configured.';
						}
						
						resultDiv.innerHTML = `
							<div class="demo-result error">
								<strong>❌ Error:</strong> ${errorMessage}
								<br><br>
								<strong>Troubleshooting:</strong>
								<ul style="text-align: left; margin-top: 10px;">
									<li>Make sure you have a valid API key</li>
									<li>Check if the API is running: <a href="${API_BASE_URL}/health" target="_blank">${API_BASE_URL}/health</a></li>
									<li>Try uploading a smaller image (under 1MB)</li>
									<li>Wait a few minutes and try again (API might be starting up)</li>
								</ul>
							</div>
						`;
					}
				}
				
				// Handle drag and drop
				document.addEventListener('DOMContentLoaded', function() {
					const imageFile = document.getElementById('imageFile');
					if (imageFile) {
						const dropZone = imageFile.parentElement;
						
						['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
							dropZone.addEventListener(eventName, preventDefaults, false);
						});
						
						function preventDefaults(e) {
							e.preventDefault();
							e.stopPropagation();
						}
						
						['dragenter', 'dragover'].forEach(eventName => {
							dropZone.addEventListener(eventName, highlight, false);
						});
						
						['dragleave', 'drop'].forEach(eventName => {
							dropZone.addEventListener(eventName, unhighlight, false);
						});
						
						function highlight(e) {
							dropZone.style.background = 'rgba(255, 255, 255, 0.1)';
						}
						
						function unhighlight(e) {
							dropZone.style.background = '';
						}
						
						dropZone.addEventListener('drop', handleDrop, false);
						
						function handleDrop(e) {
							const dt = e.dataTransfer;
							const files = dt.files;
							
							if (files.length > 0) {
								const file = files[0];
								
								// Validate file type
								const supportedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/bmp', 'image/tiff'];
								const supportedExtensions = ['.jpg', '.jpeg', '.png', '.webp', '.bmp', '.tiff', '.tif'];
								const fileName = file.name.toLowerCase();
								const isValidType = supportedTypes.includes(file.type) || 
												   supportedExtensions.some(ext => fileName.endsWith(ext));
								
								if (!isValidType) {
									document.getElementById('imageResult').innerHTML = 
										'<div class="demo-result error">❌ Unsupported file format. Please upload a JPEG, PNG, WebP, BMP, or TIFF image.</div>';
									return;
								}
								
								imageFile.files = files;
								
								// Clear any previous error messages
								const resultDiv = document.getElementById('imageResult');
								if (resultDiv.innerHTML.includes('Unsupported file format')) {
									resultDiv.innerHTML = '';
								}
							}
						}
					}
				});
			</script>

	</body>
</html>